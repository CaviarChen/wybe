# Should we move p1 to p2 directly?
# Or do we allocation p1 in stack?

use position

public proc replicate(?p2:position) use !io
  ?p1 = position(101,102)
  ?p2 = position(p1.x, p1.y)
  x(!p1, 10000) # non-destructive update
  y(!p2, p1.y+1) # destructive update
  !print("p1:")
  !printPosition(p1)
  !print("p2:")
  !printPosition(p2)
end

public proc foo use !io
  !replicate(?p2)
  x(!p2, 20000)
  !print("after x(!p2, 20000) - p2:")
  !printPosition(p2)
end

!foo
